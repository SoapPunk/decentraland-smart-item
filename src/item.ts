import*as e from"@decentraland/Identity";import*as t from"@decentraland/EnvironmentAPI";import*as n from"@decentraland/web3-provider";import*as i from"@decentraland/EthereumController";import*as a from"@decentraland/RestrictedActions";import*as o from"@dcl/crypto-scene-utils";import*as r from"@dcl/ecs-scene-utils";import*as s from"eth-connect";export default(function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i,l:0,exports:{}};e[i].call(a.exports,a,a.exports,n);a.l=1;return a.exports}n.m=e;n.c=t;n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:1,get:i})};n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:1})};n.t=function(e,t){1&t&&(e=n(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);n.r(i);Object.defineProperty(i,"default",{enumerable:1,value:e});if(2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=0)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:1});const i=n(1);class a{init(){this.network_compi=new i.Blockchain(i.NETWORK.MATIC,i.CHARACTER.COMPICACTUS);engine.addSystem(new i.CompiNPCSystem)}spawn(e,t,n){let a;new i.CompiNPC(-1,this.network_compi).setParent(e)}}t.default=a},function(e,t,n){!function(e,i){i(t,n(2),n(3),n(4))}(this,(function(e,t,n,i){function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:1,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=a(i),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function s(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u=function(){return(u=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function p(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r}function c(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{u(i.next(e))}catch(e){o(e)}}function s(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}u((i=i.apply(e,t||[])).next())}))}function y(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:0};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:1}}([o,s])}}}function l(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,a,o=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)r.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return r}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var h=function(e,t,n){return c(void 0,void 0,void 0,(function(){var i,a;return y(this,(function(o){switch(o.label){case 0:i=0,o.label=1;case 1:if(!(i<n))return[3,6];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,fetch(e,t)];case 3:return[2,o.sent()];case 4:if(a=o.sent(),i+1===n)throw a;return[3,5];case 5:return i++,[3,1];case 6:return[2]}}))}))};function f(e){for(var t=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-t>e);n++);}var g={Add:{position:[-.9736900329589844,.5958811640739441,.040917061269283295],rotation:[9992007221626409e-31,4.81169628585576e-8,-.3581227958202362,-.9336745142936707],scale:[.18492013216018677,.18492008745670319,.18492013216018677],uv:[.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526,.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526]},ArrowLeftCompi:{position:[1.4788908958435059,.6966143846511841,.040916964411735535],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.14559833705425262,.14559833705425262,.14559833705425262],uv:[.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089,.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089]},ArrowLeftQuestions:{position:[-.5068280696868896,-.20516154170036316,.0409170463681221],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.13791120052337646,.13791120052337646,.13791120052337646],uv:[.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493,.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493]},ArrowRightCompi:{position:[.5825899839401245,.7002140879631042,.04091687127947807],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.15308743715286255,.15308743715286255,.15308743715286255],uv:[.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133,.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133]},ArrowRightQuestions:{position:[-1.3984005451202393,-.21152262389659882,.04091695323586464],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.14561930298805237,.14561930298805237,.14561930298805237],uv:[.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332,.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332]},BackgroundAnswers:{position:[-.00592494010925293,-.07895167171955109,-1.060785503881334e-8],rotation:[-0,-1174602272000988e-29,8.742277657347586e-8,1],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},BackgroundCompicactus:{position:[1.0598316192626953,-.04718310385942459,.0029314737766981125],rotation:[-7103880569560197e-31,-6.2252460963918566e-9,.04633298143744469,-.998926043510437],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494,.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494]},BackgroundQuestions:{position:[-.9756283760070801,-.06579305976629257,-8.83987905098138e-9],rotation:[-0,-1.3435884227419592e-7,1,-4.371138828673793e-8],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},CancelRedCompi:{position:[1.0075632333755493,-.01593323051929474,.07591697573661804],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537,.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537]},Compicactus:{position:[1.0598316192626953,-.04718310385942459,.044343285262584686],rotation:[901047179509523e-30,2.344884952876214e-9,-.017452403903007507,-.9998477101325989],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.001507878303527832,.9648514986038208,.9648514986038208,.9984922409057617,.9984921216964722,.03514862060546875,.03514862060546875,.0015079975128173828,.001507878303527832,.9648514986038208,.9648514986038208,.9984922409057617,.9984921216964722,.03514862060546875,.03514862060546875,.0015079975128173828]},EditAnswer:{position:[-.17161095142364502,.5804060697555542,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},EditName:{position:[1.023306131362915,.9744213819503784,.040916845202445984],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},Help:{position:[-.4528905153274536,1.1889170408248901,.04091717302799225],rotation:[-0,0,-0,-1],scale:[.36114898324012756,.18057449162006378,.36114898324012756],uv:[.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142,.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142]},Mint:{position:[-.002437543123960495,1.3288666009902954,.04091716185212135],rotation:[-0,0,-0,-1],scale:[.4449852406978607,.22249262034893036,.4449852406978607],uv:[.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283,.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283]},Name:{position:[1.0389444828033447,.7171220183372498,.040916867554187775],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6634318828582764,.28844866156578064,.28844866156578064],uv:[.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064,.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064]},OkGreenCompi:{position:[1.0075632333755493,-.01593323051929474,.08991697430610657],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537,.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537]},PolygonMana:{position:[.5321251749992371,1.2641630172729492,.04091712832450867],rotation:[-0,0,-0,-1],scale:[.528679609298706,.505429208278656,.47581160068511963],uv:[.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647,.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647]},Remove:{position:[.10745614767074585,.5804059505462646,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.19285941123962402,.19285941123962402,.19285941123962402],uv:[.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203,.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203]},SelectedQuestion:{position:[-.9813814163208008,.285593181848526,.06129398196935654],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6806405782699585,.09864357113838196,.19728714227676392],uv:[.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728,.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728]},WorkingYellowCompi:{position:[1.0075632333755493,-.01593323051929474,.10591697692871094],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212,.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212]}},_=["Action-01-Look_R-L","Action-02-Look_R","Action-03-Look_L","Action-04-Look-Up","Action-05-Sleep","Action-06-Dancing","Action-07-Swinging","Action-08-LOL","Action-09-Pised_Off","Action-10-Yawn","Action-11-Alert","Action-12_Sigh"],b=function(e){function t(){var t=e.call(this)||this;return t.element_entities=[],t.current_compi=0,t.character_name="Compi",t.variation={body:"",cigar:"",eyes:"",glasses:"",hat:"",mustache:"",nose:"",pot:""},t.plane_material=new BasicMaterial,t.addComponent(new PlaneShape),t.addComponent(t.plane_material),t}return s(t,e),t.prototype.play_random=function(){var e=Math.floor(Math.random()*_.length);this.set_body(this.current_compi,e,0)},t.prototype.play=function(e){this.set_body(this.current_compi,e,0)},t.prototype.remove_elements=function(){for(var e=0;e<this.element_entities.length;e++)engine.removeEntity(this.element_entities[e])},t.prototype.set_body=function(e,t,n){return c(this,void 0,void 0,(function(){var i,a,o;return y(this,(function(r){return log("set mp4 body"),this.current_compi=e,n&&(this.plane_material=new BasicMaterial,this.addComponentOrReplace(this.plane_material)),i="https://dweb.link/ipfs/bafybeia7pyfmyjcnjrodau2yxm3h3bs6suv3xfzwvhohktnw6v2cevayaq/mp4/"+e+"/"+e+"_"+_[t]+".mp4",log(i),a=new VideoClip(i),o=new VideoTexture(a),this.plane_material.texture=o,o.playing=1,[2]}))}))},t.prototype.set_body_=function(e){return c(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:return log("set body"),this.remove_elements(),"https://dweb.link/ipfs/QmVcN4A6EzBrrWcsovrKsRg5sTootZ9HmSuTadGQ2XrL9y",t={headers:{Accept:"application/json"},method:"GET"},log("get variations"),[4,h("https://dweb.link/ipfs/QmVcN4A6EzBrrWcsovrKsRg5sTootZ9HmSuTadGQ2XrL9y",t,3).then((function(e){return null==e?[]:e.json()})).catch((function(e){return log("Error")}))];case 1:return n=i.sent(),log("variations",n),this.variation=n[e],this.add_element("body"),this.add_element("cigar"),this.add_element("eyes"),this.add_element("glasses"),this.add_element("hat"),this.add_element("mustache"),this.add_element("nose"),this.add_element("pot"),[2]}}))}))},t.prototype.add_element=function(e){""!=this.variation[e]&&(this.element_entities.push(new Entity),this.get_last_element().addComponent(new GLTFShape("compi_models/"+this.variation[e]+".glb")),this.get_last_element().addComponent(new Animator),engine.addEntity(this.get_last_element()),this.get_last_element().setParent(this))},t.prototype.get_last_element=function(){return this.element_entities[this.element_entities.length-1]},t}(Entity),v={Add:{position:[-.9736900329589844,.5958811640739441,.040917061269283295],rotation:[9992007221626409e-31,4.81169628585576e-8,-.3581227958202362,-.9336745142936707],scale:[.18492013216018677,.18492008745670319,.18492013216018677],uv:[.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526,.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526]},ArrowLeftCompi:{position:[1.4788908958435059,.6966143846511841,.040916964411735535],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.14559833705425262,.14559833705425262,.14559833705425262],uv:[.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089,.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089]},ArrowLeftQuestions:{position:[-.5068280696868896,-.20516154170036316,.0409170463681221],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.13791120052337646,.13791120052337646,.13791120052337646],uv:[.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493,.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493]},ArrowRightCompi:{position:[.5825899839401245,.7002140879631042,.04091687127947807],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.15308743715286255,.15308743715286255,.15308743715286255],uv:[.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133,.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133]},ArrowRightQuestions:{position:[-1.3984005451202393,-.21152262389659882,.04091695323586464],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.14561930298805237,.14561930298805237,.14561930298805237],uv:[.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332,.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332]},BackgroundAnswers:{position:[-.00592494010925293,-.07895167171955109,-1.060785503881334e-8],rotation:[-0,-1174602272000988e-29,8.742277657347586e-8,1],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},BackgroundCompicactus:{position:[1.0598316192626953,-.04718310385942459,.0029314737766981125],rotation:[-7103880569560197e-31,-6.2252460963918566e-9,.04633298143744469,-.998926043510437],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494,.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494]},BackgroundQuestions:{position:[-.9756283760070801,-.06579305976629257,-8.83987905098138e-9],rotation:[-0,-1.3435884227419592e-7,1,-4.371138828673793e-8],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},CancelRedCompi:{position:[1.0075632333755493,-.01593323051929474,.07591697573661804],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537,.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537]},Compicactus:{position:[1.0598316192626953,-.04718310385942459,.044343285262584686],rotation:[901047179509523e-30,2.344884952876214e-9,-.017452403903007507,-.9998477101325989],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.001507878303527832,.0351487398147583,.9648514986038208,.0015079975128173828,.9984921216964722,.9648516178131104,.03514862060546875,.9984922409057617,.001507878303527832,.0351487398147583,.9648514986038208,.0015079975128173828,.9984921216964722,.9648516178131104,.03514862060546875,.9984922409057617]},EditAnswer:{position:[-.17161095142364502,.5804060697555542,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},EditName:{position:[1.023306131362915,.9744213819503784,.040916845202445984],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},Help:{position:[-.4528905153274536,1.1889170408248901,.04091717302799225],rotation:[-0,0,-0,-1],scale:[.36114898324012756,.18057449162006378,.36114898324012756],uv:[.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142,.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142]},Mint:{position:[-.002437543123960495,1.3288666009902954,.04091716185212135],rotation:[-0,0,-0,-1],scale:[.4449852406978607,.22249262034893036,.4449852406978607],uv:[.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283,.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283]},Name:{position:[1.0389444828033447,.7171220183372498,.040916867554187775],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6634318828582764,.28844866156578064,.28844866156578064],uv:[.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064,.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064]},OkGreenCompi:{position:[1.0075632333755493,-.01593323051929474,.08991697430610657],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537,.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537]},PolygonMana:{position:[.5321251749992371,1.2641630172729492,.04091712832450867],rotation:[-0,0,-0,-1],scale:[.528679609298706,.505429208278656,.47581160068511963],uv:[.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647,.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647]},Remove:{position:[.10745614767074585,.5804059505462646,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.19285941123962402,.19285941123962402,.19285941123962402],uv:[.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203,.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203]},SelectedQuestion:{position:[-.9813814163208008,.285593181848526,.06129398196935654],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6806405782699585,.09864357113838196,.19728714227676392],uv:[.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728,.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728]},WorkingYellowCompi:{position:[1.0075632333755493,-.01593323051929474,.10591697692871094],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212,.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212]}},w=["Action-01-Look_R-L","Action-02-Look_R","Action-03-Look_L","Action-04-Look-Up","Action-05-Sleep","Action-06-Dancing","Action-07-Swinging","Action-08-LOL","Action-09-Pised_Off","Action-10-Yawn","Action-11-Alert","Action-12_Sigh"],T=function(e){function t(){var t=e.call(this)||this;return t.images_path="https://cors-anywhere.herokuapp.com/https://voxters.s3.eu-west-3.amazonaws.com/thumbnails/boxter_{__ID__}.jpg",t.videos_path="",t.character_name="Voxter",t}return s(t,e),t}(function(e){function t(){var t=e.call(this)||this;return t.element_entities=[],t.current_compi=0,t.images_path="",t.videos_path="",t.character_name="",t.plane_material=new BasicMaterial,t.addComponent(new PlaneShape),t.addComponent(t.plane_material),t}return s(t,e),t.prototype.play_random=function(){var e=Math.floor(Math.random()*w.length);this.set_video_body(this.current_compi,e,0)},t.prototype.play=function(e){this.set_video_body(this.current_compi,e,0)},t.prototype.remove_elements=function(){for(var e=0;e<this.element_entities.length;e++)engine.removeEntity(this.element_entities[e])},t.prototype.set_body=function(e,t,n){return c(this,void 0,void 0,(function(){return y(this,(function(i){return""!=this.images_path&&this.set_image_body(e,t,n),""!=this.videos_path&&this.set_video_body(e,t,n),[2]}))}))},t.prototype.set_image_body=function(e,t,n){return c(this,void 0,void 0,(function(){var i,a,o;return y(this,(function(r){return""==this.images_path||(log("set image body"),this.current_compi=e,n&&(this.plane_material=new BasicMaterial,this.addComponentOrReplace(this.plane_material)),i=w[t],a=(a=this.images_path.replace("{__ID__}",String(e))).replace("{__ACTION__}",String(i)),log(a),o=new Texture(a),this.plane_material.texture=o),[2]}))}))},t.prototype.set_video_body=function(e,t,n){return c(this,void 0,void 0,(function(){var i,a,o,r;return y(this,(function(s){return""==this.videos_path||(log("set video body"),this.current_compi=e,n&&(this.plane_material=new BasicMaterial,this.addComponentOrReplace(this.plane_material)),i=w[t],a=(a=this.images_path.replace("{__ID__}",String(e))).replace("{__ACTION__}",String(i)),log(a),o=new VideoClip(a),r=new VideoTexture(o),this.plane_material.texture=r,r.playing=1),[2]}))}))},t}(Entity)),C=function(){function e(){this.fixed=0}return p([Component("fixShape")],e)}(),x=new Material;x.alphaTest=1,x.albedoColor=new Color4(0,0,0,0);var M=engine.getComponentGroup(PlaneShape,C,OnPointerDown),k=function(){function e(){this.timer=0}return e.prototype.update=function(e){var t,n;if(this.timer+=e,!(this.timer<1))try{for(var i=l(M.entities),a=i.next();!a.done;a=i.next()){var o=a.value,r=o.getComponent(C);if(!r.fixed){r.fixed=1;var s=new Entity;s.addComponent(new PlaneShape),s.addComponent(o.getComponent(OnPointerDown)),s.addComponent(x),s.setParent(o),r.fixentity=s}r.fixentity.getComponent(PlaneShape).visible=o.getComponent(PlaneShape).visible}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e}();engine.addSystem(new k);var E={COMPICACTUS:0,VOXTER:1,ETHERMON:2,ROVI:3,ZEDRUN:4},A={MATIC:"matic",MUMBAI:"mumbai",MOCKUP:"mockup"},R=0,S=1,P=2,q=3,I=4,O=5,N=6,Q=7,D=8,F=9,U=10,B=11,L=new Texture("https://dweb.link/ipfs/bafybeifaih2h275bmmessdnwk5tkbbdsc6y4aacpbiu4jdsu2numusrxne/CompiUIB.png"),V=new Material;V.transparencyMode=1,V.albedoTexture=L,V.emissiveTexture=L,V.emissiveIntensity=1,V.emissiveColor=new Color3(.5,.5,.5);var j=new UICanvas,W=.55,K=function(){function e(){this.current_compi=-1,this.current_token=-1,this.current_menu=0,this.goto_compi=-1,this.dirty_compi=0,this.play_animation=-1,this.answer="",this.answer_drawn=0,this.answer_dt=0,this.questions="",this.name="",this.price="-",this.price_number=0,this.price_discount=0,this.question_list=[],this.current_qpage=0,this.goto_qpage=0,this.current_question=0,this.goto_question=0,this.name_to_set="",this.answer_to_set="",this.question_to_add="",this.asking_question="",this.dirty_questions=0,this.current_action="",this.forced=0,this.broadcast=[],this.working=0}return p([Component("stool")],e)}(),H=function(e){function t(t,n){var i=e.call(this)||this;if(i.compidata_shape=new TextShape,i.answer_shape=new TextShape,i.questions_shape=new TextShape,i.price_shape=new TextShape,i.remove_entity=new Entity,i.editanswer_entity=new Entity,i.cancel_entity=new Entity,i.error_entity=new Entity,i.ok_entity=new Entity,i.working_entity=new Entity,n.character==E.COMPICACTUS)i.planesMenu=g,i.compi_entity=new b;else{if(n.character!=E.VOXTER)throw new Error("Character not found: "+n.character);i.planesMenu=v,i.compi_entity=new T}(i.textInput=new UIInputText(j),i.stool_component=new K,i.addComponent(i.stool_component),engine.addEntity(i),i.stool_component.network=n,-1!=t&&(i.stool_component.forced=1,i.stool_component.current_action="goto_compi",i.stool_component.goto_compi=t,i.stool_component.dirty_compi=1,log("Forced")),i.stool_component.forced)||(i.createPlane(i.planesMenu.ArrowLeftCompi).addComponent(new OnPointerDown((function(){i.stool_component.working||(i.stool_component.current_action="previous_compi")}),{hoverText:"Previous "+i.compi_entity.character_name})),i.createPlane(i.planesMenu.ArrowRightCompi).addComponent(new OnPointerDown((function(){i.stool_component.working||(i.stool_component.current_action="next_compi")}),{hoverText:"Next "+i.compi_entity.character_name})),i.createPlane(i.planesMenu.Add).addComponent(new OnPointerDown((function(){i.stool_component.working||(i.stool_component.current_action="add_question")}),{hoverText:"Add question"})),i.editanswer_entity=i.createPlane(i.planesMenu.EditAnswer),i.editanswer_entity.getComponent(PlaneShape).visible=0,i.editanswer_entity.addComponent(new OnPointerDown((function(){i.stool_component.working||(i.stool_component.current_action="edit_answer")}),{hoverText:"Edit answer"})),i.remove_entity=i.createPlane(i.planesMenu.Remove),i.remove_entity.getComponent(PlaneShape).visible=0,i.remove_entity.addComponent(new OnPointerDown((function(){i.stool_component.working||(i.stool_component.current_action="remove_question")}),{hoverText:"Remove Question"})),i.createPlane(i.planesMenu.EditName).addComponent(new OnPointerDown((function(){i.stool_component.working||(i.stool_component.current_action="set_name")}),{hoverText:"Set Name"})),i.cancel_entity=i.createPlane(i.planesMenu.CancelRedCompi),engine.removeEntity(i.cancel_entity),i.cancel_entity.addComponent(new OnPointerDown((function(){i.stool_component.current_action="cancel"}),{hoverText:"Cancel"})),i.error_entity=i.createPlane(i.planesMenu.CancelRedCompi),engine.removeEntity(i.error_entity),i.error_entity.addComponent(new OnPointerDown((function(){engine.removeEntity(i.error_entity)}),{hoverText:"Error. Please try again!"})),i.ok_entity=i.createPlane(i.planesMenu.OkGreenCompi),engine.removeEntity(i.ok_entity),i.ok_entity.addComponent(new OnPointerDown((function(){engine.removeEntity(i.ok_entity)}),{hoverText:"Success"})),i.working_entity=i.createPlane(i.planesMenu.WorkingYellowCompi),engine.removeEntity(i.working_entity),i.working_entity.addComponent(new OnPointerDown((function(){}),{hoverText:"Waiting for signature. Check wallet!"})));i.arrowleftquestions_entity=i.createPlane(i.planesMenu.ArrowLeftQuestions),i.arrowleftquestions_entity.addComponent(new OnPointerDown((function(){i.stool_component.working||(i.stool_component.current_action="previous_question_page")}),{hoverText:"Prev page"})),i.arrowrightquestions_entity=i.createPlane(i.planesMenu.ArrowRightQuestions),i.arrowrightquestions_entity.addComponent(new OnPointerDown((function(){i.stool_component.working||(i.stool_component.current_action="next_question_page")}),{hoverText:"Next page"}));var a=i.createPlane(i.planesMenu.BackgroundAnswers);i.createPlane(i.planesMenu.BackgroundCompicactus);var o=i.createPlane(i.planesMenu.BackgroundQuestions),r=i.createPlane(i.planesMenu.Compicactus);i.createPlane(i.planesMenu.Name),engine.removeEntity(r),i.compi_entity.addComponent(r.getComponent(Transform)),i.compi_entity.setParent(i),i.compi_entity.getComponent(PlaneShape).uvs=r.getComponent(PlaneShape).uvs;var s=new OnPointerDown((function(e){i.stool_component.working||(0==e.buttonId?i.stool_component.current_action="ask_question":1==e.buttonId?i.stool_component.current_action="previous_question":2==e.buttonId&&(i.stool_component.current_action="next_question"))}),{hoverText:"E: Up - F: Down - Click: Ask"});return o.addComponent(s),a.addComponent(s),i.compidata_shape.fontSize=1,i.compidata_shape.value="",i.compidata_shape.hTextAlign="left",i.compidata_shape.vTextAlign="center",i.compidata_shape.font=new Font(Fonts.SanFrancisco_Heavy),i.compidata_shape.color=Color3.Black(),i.compidata_entity=new Entity,i.compidata_entity.addComponent(i.compidata_shape),i.compidata_entity.addComponent(new Transform({position:new Vector3(1.3,1.24,.08),rotation:Quaternion.Euler(0,180,0),scale:new Vector3(.4,.4,.4)})),i.compidata_entity.setParent(i),i.questions_shape.textWrapping=1,i.questions_shape.font=new Font(Fonts.SanFrancisco_Heavy),i.questions_shape.hTextAlign="left",i.questions_shape.vTextAlign="top",i.questions_shape.fontSize=1,i.questions_shape.fontWeight="normal",i.questions_shape.value="",i.questions_shape.width=1.5,i.questions_shape.color=Color3.Black(),i.questions_entity=new Entity,i.questions_entity.addComponent(i.questions_shape),i.questions_entity.addComponent(new Transform({position:new Vector3(-1,.74,.08),rotation:Quaternion.Euler(0,180,0),scale:new Vector3(.5,.5,1)})),i.questions_entity.setParent(i),i.answer_shape.textWrapping=1,i.answer_shape.font=new Font(Fonts.SanFrancisco_Heavy),i.answer_shape.hTextAlign="center",i.answer_shape.vTextAlign="top",i.answer_shape.fontSize=1,i.answer_shape.fontWeight="normal",i.answer_shape.value="",i.answer_shape.width=1.3,i.answer_shape.color=Color3.Black(),i.answer_entity=new Entity,i.answer_entity.addComponent(i.answer_shape),i.answer_entity.addComponent(new Transform({position:new Vector3(0,.65,.08),rotation:Quaternion.Euler(0,180,0),scale:new Vector3(.5,.5,1)})),i.answer_entity.setParent(i),i.textInput.width="50%",i.textInput.height="50px",i.textInput.vAlign="bottom",i.textInput.hAlign="center",i.textInput.fontSize=30,i.textInput.placeholder="Write name here",i.textInput.placeholderColor=Color4.Gray(),i.textInput.positionY="200px",i.textInput.isPointerBlocker=1,i.textInput.visible=0,i}return s(t,e),t.prototype.createPlane=function(e){var t=new Entity,n=new PlaneShape;n.uvs=e.uv,t.addComponent(n);var i=new Transform({position:new(Vector3.bind.apply(Vector3,m([void 0],e.position))),rotation:new(Quaternion.bind.apply(Quaternion,m([void 0],e.rotation))),scale:new(Vector3.bind.apply(Vector3,m([void 0],e.scale)))});return i.position.y+=W,t.addComponent(i),t.addComponent(V),t.setParent(this),t.addComponent(new C),t},t.prototype.destroy=function(){engine.removeEntity(this)},t}(Entity),X=engine.getComponentGroup(K),G=function(){function e(){}return e.prototype.update=function(e){var t,n;try{for(var i=l(X.entities),a=i.next();!a.done;a=i.next()){var o=a.value,r=o,s=o.getComponent(K);s.answer_drawn<s.answer.length&&(s.answer_drawn+=Math.round(100*e),s.answer_drawn>s.answer.length&&(s.answer_drawn=s.answer.length),r.answer_shape.value=s.answer.substring(0,s.answer_drawn)),s.questions!=r.questions_shape.value&&(r.questions_shape.value=s.questions,r.questions_shape.width=1.2),s.play_animation>=0&&(r.compi_entity.play(s.play_animation),s.play_animation=-1),"cancel"!=s.current_action?s.working||("goto_compi"!=s.current_action?-1!=s.current_compi?s.dirty_compi?(s.working=1,this.updateCompi(r)):"previous_compi"!=s.current_action?"next_compi"!=s.current_action?-2!=s.current_compi&&(s.dirty_questions?(s.working=1,this.updateQuestions(r)):"add_question"!=s.current_action?"remove_question"!=s.current_action?"edit_answer"!=s.current_action?"set_name"!=s.current_action?"ask_question"!=s.current_action?"previous_question"!=s.current_action?"next_question"!=s.current_action?"previous_question_page"!=s.current_action?"next_question_page"!=s.current_action||(log("action: next_question_page"),s.working=1,s.current_action="",s.goto_qpage=s.current_qpage+1,this.gotoQPage(s)):(log("action: previous_question_page"),s.working=1,s.current_action="",s.goto_qpage=s.current_qpage-1,this.gotoQPage(s)):(s.working=1,s.current_action="",s.goto_question=s.current_question+1,this.gotoQuestion(s)):(s.working=1,s.current_action="",s.goto_question=s.current_question-1,this.gotoQuestion(s)):(s.working=1,s.current_action="",this.askQuestion(o)):(s.working=1,s.current_action="",this.setName(o)):(s.working=1,s.current_action="",this.editAnwser(o)):(s.working=1,s.current_action="",this.removeQuestion(o)):(s.working=1,s.current_action="",this.addQuestion(o))):(s.working=1,s.current_action="",s.goto_compi=s.current_compi+1,this.goto(s)):(s.working=1,s.current_action="",s.goto_compi=s.current_compi-1,this.goto(s)):(s.working=1,s.current_action="",s.goto_compi=0,this.goto(s)):(s.working=1,s.current_action="",this.goto(s))):(s.current_action="",r.textInput.visible=0,engine.removeEntity(r.cancel_entity),s.working=0)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.goto=function(e){return c(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return log("goto"),log("stool_component.current_compi",e.current_compi),log("stool_component.goto_compi",e.goto_compi),log("stool_component.dirty_compi",e.dirty_compi),e.forced?[3,2]:(log("Getting compis"),[4,e.network.balanceOf()]);case 1:return t=n.sent(),log("compisCount",t),t>0?(log("compisCount>0"),e.goto_compi<0?(log("stool_component.goto_compi<0"),e.current_compi=t-1,e.dirty_compi=1):e.goto_compi>=t?(log("stool_component.goto_compi>=compisCount"),e.current_compi=0,e.dirty_compi=1):(e.current_compi=e.goto_compi,e.dirty_compi=1)):(log("else1"),e.current_compi=-2,e.goto_compi=0,e.dirty_compi=1),[3,3];case 2:log("else2"),e.current_compi=e.goto_compi,e.dirty_compi=1,n.label=3;case 3:return log("stool_component.current_compi",e.current_compi),log("stool_component.goto_compi",e.goto_compi),log("stool_component.dirty_compi",e.dirty_compi),e.working=0,[2]}}))}))},e.prototype.gotoQuestion=function(e){return c(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){for(t=0,n=0;n<e.question_list.length;n++)""!=e.question_list[n].value&&(t+=1);return e.goto_question<0?(e.goto_question=t-1,e.current_question=t-1,e.dirty_questions=1):e.goto_question>=t?(e.goto_question=0,e.current_question=0,e.dirty_questions=1):(e.current_question=e.goto_question,e.dirty_questions=1),log(e.goto_question,e.current_question),e.working=0,[2]}))}))},e.prototype.gotoQPage=function(e){return c(this,void 0,void 0,(function(){var t,n,i,a;return y(this,(function(o){switch(o.label){case 0:for(t=0,a=0;a<e.question_list.length;a++)""!=e.question_list[a].value&&(t+=1);return e.goto_qpage<0||e.goto_qpage>e.current_qpage&&t<10?e.current_qpage=0:e.current_qpage=e.goto_qpage,log("current_qpage",e.current_qpage),n=10*e.current_qpage,[4,e.network.getQuestions(e.current_token,n)];case 1:for(i=o.sent(),log(i),a=0;a<i.length;a++)e.question_list[a]={id:a+n,value:i[a]};return e.current_question=0,e.dirty_questions=1,e.working=0,[2]}}))}))},e.prototype.updateCompi=function(e,t){return c(this,void 0,void 0,(function(){var t,n,i;return y(this,(function(a){switch(a.label){case 0:return(t=e.getComponent(K)).dirty_compi=0,t.current_compi<0?(e.compi_entity.set_body(0,0,1),e.compidata_shape.value="Demo",t.working=0,[2]):(log("updateCompi"),e.compidata_shape.value="-",n=0,t.forced?[3,2]:(e.editanswer_entity.getComponent(PlaneShape).visible=0,e.remove_entity.getComponent(PlaneShape).visible=0,[4,t.network.tokenOfOwnerByIndex(t.current_compi)]));case 1:return n=a.sent(),t.current_token=n,[3,3];case 2:n=t.current_token=t.current_compi,a.label=3;case 3:return log("compiId",n),[4,t.network.getName(n)];case 4:return""===(i=a.sent())&&(i="No name set"),e.compidata_shape.value="#"+n+":"+i,e.compi_entity.set_body(n,0,1),this.gotoQPage(t),t.working=0,[2]}}))}))},e.prototype.updateQuestions=function(e){return c(this,void 0,void 0,(function(){var t,n,i,a,o;return y(this,(function(r){switch(r.label){case 0:return[4,(t=e.getComponent(K)).network.getQuestionsCount(t.current_token)];case 1:for(n=r.sent(),e.arrowleftquestions_entity.getComponent(PlaneShape).visible=1,e.arrowrightquestions_entity.getComponent(PlaneShape).visible=1,n>10?0==10*t.current_qpage&&(e.arrowleftquestions_entity.getComponent(PlaneShape).visible=0):(log("hide arrows"),e.arrowleftquestions_entity.getComponent(PlaneShape).visible=0,e.arrowrightquestions_entity.getComponent(PlaneShape).visible=0),i="",a=0,o=0;o<t.question_list.length;o++)""!=t.question_list[o].value&&(t.current_question==o?i+="[ ":i+="",i+=""+t.question_list[o].value,a+=1,t.current_question==o?i+=" ]\n":i+="\n");return t.questions=i,a<10&&(e.arrowrightquestions_entity.getComponent(PlaneShape).visible=0),t.dirty_questions=0,t.working=0,[2]}}))}))},e.prototype.setName=function(e){return c(this,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){return t=e.getComponent(K),log("Set Name"),t.current_compi<0||(e.textInput.visible=1,e.textInput.placeholder="Write name here",engine.addEntity(e.cancel_entity),e.textInput.onTextSubmit=new OnTextSubmit((function(i){return c(n,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e.textInput.visible=0,engine.removeEntity(e.cancel_entity),engine.addEntity(e.working_entity),[4,t.network.setName(t.current_token,i.text).then((function(n){1===n.status?(t.dirty_compi=1,t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.ok_entity),log("setName Ok ",n)):(t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.error_entity),log("Error on setName",n))})).catch((function(n){t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.error_entity),log("Error on setName",n)}))];case 1:return n.sent(),[2]}}))}))})),engine.addEntity(e.cancel_entity)),[2]}))}))},e.prototype.askQuestion=function(e){return c(this,void 0,void 0,(function(){var t,n,i,a,o,r,s,u,p,c,l;return y(this,(function(y){switch(y.label){case 0:return t=e.getComponent(K),n=t.question_list[t.current_question].value,[4,t.network.getAnswer(t.current_token,n)];case 1:for(i=y.sent(),log(i),a=/\{.*?\}/g,r=i;null!==(o=a.exec(i));)o.index===a.lastIndex&&a.lastIndex++,o.forEach((function(e,n){log("Found match, group "+n+": "+e);var i=void 0;try{i=JSON.parse(e)}catch(t){log("Error parsing json to broadcast "+e)}null!=i&&t.broadcast.push(i),r=r.replace(e,"")}));for(s="You: "+n+"\n\n"+e.compi_entity.character_name+": "+r,t.answer=s,t.answer_drawn=0,u=Math.floor(3*Math.random()),p=0,c=0;c<t.broadcast.length;c++)null!=t.broadcast[c].emote&&(t.play_animation=z(t.broadcast[c].emote),t.broadcast[c].emote=void 0,p=1),null!=t.broadcast[c].audio&&(l=new AudioStream(t.broadcast[c].audio),e.addComponentOrReplace(l),l.playing=1,l.volume=.2,t.broadcast[c].audio=void 0);return p||(t.play_animation=u),log("stool_component.play_animation",t.play_animation),t.forced||(e.editanswer_entity.getComponent(PlaneShape).visible=1,e.remove_entity.getComponent(PlaneShape).visible=1),t.working=0,[2]}}))}))},e.prototype.addQuestion=function(e){return c(this,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){return t=e.getComponent(K),e.textInput.visible=1,e.textInput.placeholder="Write question",engine.addEntity(e.cancel_entity),e.textInput.onTextSubmit=new OnTextSubmit((function(i){return c(n,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return e.textInput.visible=0,engine.removeEntity(e.cancel_entity),engine.addEntity(e.working_entity),[4,t.network.addQuestion(t.current_token,i.text,"Default answer").then((function(n){1===n.status?(t.dirty_compi=1,t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.ok_entity),log("addQuestion Ok ",n)):(t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.error_entity),log("Error on addQuestion",n))})).catch((function(n){t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.error_entity),log("Error on addQuestion",n)}))];case 1:return n.sent(),[2]}}))}))})),engine.addEntity(e.cancel_entity),[2]}))}))},e.prototype.removeQuestion=function(e){return c(this,void 0,void 0,(function(){var t,n,i;return y(this,(function(a){switch(a.label){case 0:return t=e.getComponent(K),n=t.question_list[t.current_question].value,i=t.question_list[t.current_question].id,engine.addEntity(e.working_entity),[4,t.network.removeQuestion(t.current_token,n,i).then((function(n){1===n.status?(t.dirty_compi=1,t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.ok_entity),log("removeQuestion Ok ",n)):(t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.error_entity),log("Error on removeQuestion",n))})).catch((function(n){t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.error_entity),log("Error on removeQuestion",n)}))];case 1:return a.sent(),[2]}}))}))},e.prototype.editAnwser=function(e){return c(this,void 0,void 0,(function(){var t,n=this;return y(this,(function(i){return t=e.getComponent(K),log("Edit Anwser"),engine.addEntity(e.cancel_entity),e.textInput.visible=1,e.textInput.placeholder="Write answer here",e.textInput.onTextSubmit=new OnTextSubmit((function(i){return c(n,void 0,void 0,(function(){var n;return y(this,(function(a){switch(a.label){case 0:return e.textInput.visible=0,log("this.current_token",t.current_token),n=t.question_list[t.current_question].value,engine.removeEntity(e.cancel_entity),engine.addEntity(e.working_entity),[4,t.network.addQuestion(t.current_token,n,i.text).then((function(n){1===n.status?(t.dirty_compi=1,t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.ok_entity),log("addQuestion (Edit Anwser) Ok ",n)):(t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.error_entity),log("Error on addQuestion (Edit Anwser)",n))})).catch((function(n){t.working=0,engine.removeEntity(e.working_entity),engine.addEntity(e.error_entity),log("Error on addQuestion (Edit Anwser)",n)}))];case 1:return a.sent(),[2]}}))}))})),[2]}))}))},e}();function z(e){return"dance"==e?O:"lol"==e?Q:"alert"==e?U:"swing"==e?N:"look_l"==e?P:"look_r"==e?S:"look_r_l"==e?R:"look_up"==e?q:"pissed_off"==e?D:"sigh"==e?B:"sleep"==e?I:"yawn"==e?F:0}var Y,J="0c53c51c",Z=se("0x"),$=0;function ee(e){return c(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:t=[],n.label=1;case 1:return n.trys.push([1,3,,5]),[4,pe(e,"eth_requestAccounts",[])];case 2:return t=n.sent(),[3,5];case 3:return n.sent(),[4,pe(e,"eth_accounts",[])];case 4:return t=n.sent(),[3,5];case 5:if(0===t.length)throw new Error("Could not find a valid connected account");return[2,t[0]]}}))}))}function te(e,t,n){return c(this,void 0,void 0,(function(){return y(this,(function(i){return[2,pe(e,"eth_signTypedData_v4",[t,n])]}))}))}function ne(e,t,n){var i=t.replace("0x",""),a=i.substring(0,64),o=i.substring(64,128),r=function(e){var t=parseInt(e,16);t<27&&(t+=27);if(27!==t&&28!==t)throw Error('Invalid signature version "'+e+'" (parsed: '+t+")");return t.toString(16)}(i.substring(128,130)),s=n.replace("0x",""),u=(s.length/2).toString(16),p=Math.ceil(s.length/64);return["0x",J,ue(e),ue("a0"),a,o,ue(r),ue(u),ie(64*p,"0",s)].join("")}function ie(e,t,n){for(var i=0;i<e&&!(n.length>=e);i++)n=""+n+t;return n}function ae(e,t,n){return c(this,void 0,void 0,(function(){var i;return y(this,(function(a){switch(a.label){case 0:return i=ue(t),[4,pe(e,"eth_call",[{data:"0x2d0335ab"+i,to:n},"latest"])];case 1:return[2,ue(a.sent())]}}))}))}function oe(e,t){return pe(e,"eth_getCode",[t.toLowerCase(),"latest"])}function re(e,t){return c(this,void 0,void 0,(function(){var n;return y(this,(function(i){switch(i.label){case 0:return[4,oe(e,t)];case 1:return[2,(a=n=i.sent(),!(se(a.toLowerCase())===Z))]}var a}))}))}function se(e){if(!/^0x[0-9a-f]*$/gi.test(e))throw new Error('Not a valid hex string "'+e+'"');for(var t=e.slice(2);t.length<40;)t="0"+t;return"0x"+t}function ue(e){return function(e,t,n){for(var i=0;i<e&&!(n.length>=e);i++)n=""+t+n;return n}(64,"0",e.toString().replace("0x",""))}function pe(e,t,n){return c(this,void 0,void 0,(function(){var i,a;return y(this,(function(o){switch(o.label){case 0:return a={jsonrpc:"2.0",id:++$,method:t,params:n},void 0===e.request?[3,2]:[4,e.request(a)];case 1:return i=o.sent(),[3,6];case 2:return void 0===e.sendAsync?[3,4]:[4,e.sendAsync(a)];case 3:return i=o.sent(),[3,6];case 4:return void 0===e.send?[3,6]:[4,e.send(t,n)];case 5:i=o.sent(),o.label=6;case 6:if(i)return[2,i.result||i];throw new Error('Could not send the transaction correcty. Either the provider does not support the method "'+t+'" or is missing a proper send/request.')}}))}))}!function(e){e.Bid="Bid",e.CollectionFactory="CollectionFactory",e.CollectionManager="CollectionManager",e.CollectionStore="CollectionStore",e.Committee="Committee",e.ERC20="ERC20",e.ERC721="ERC721",e.ERC721CollectionV2="ERC721CollectionV2",e.Forwarder="Forwarder",e.MANAToken="MANAToken",e.Marketplace="Marketplace",e.Rarities="Rarities"}(Y||(Y={}));var ce,ye=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"}],le=[{name:"nonce",type:"uint256"},{name:"from",type:"address"},{name:"functionSignature",type:"bytes"}];!function(e){e.INVALID_ADDRESS="invalid_address",e.CONTRACT_ACCOUNT="contract_account",e.USER_DENIED="user_denied",e.UNKNOWN="unknown"}(ce||(ce={}));var de=function(e){function t(t,n){var i=e.call(this,t)||this;return i.code=n,i}return s(t,e),t}(Error);function me(e,t,n,i,a){return void 0===a&&(a={}),c(this,void 0,void 0,(function(){var o,r,s,p,c,l,d,m,h,f;return y(this,(function(y){switch(y.label){case 0:if(o=u(u({},{serverURL:"https://transactions-api.decentraland.org/v1"}),a),!i.address.trim())throw new de("The contract address for "+i.name+" is empty. You're probably trying to get a proxy contract. Try adding an address to the result of getContract",ce.INVALID_ADDRESS);y.label=1;case 1:return y.trys.push([1,8,,9]),[4,ee(e)];case 2:return r=y.sent(),[4,re(e,r)];case 3:if(y.sent())throw new de("Contract accounts are not supported",ce.CONTRACT_ACCOUNT);return[4,ae(t,r,i.address)];case 4:return s=y.sent(),g=i.chainId,p="number"==typeof g?"0x"+ue(g.toString(16)):"0x"+ue(g),c=function(e,t){return{name:t.name,version:t.version,verifyingContract:t.address,salt:e}}(p,i),l=function(e,t,n,i){return{types:{EIP712Domain:ye,MetaTransaction:le},domain:i,primaryType:"MetaTransaction",message:{nonce:parseInt(t,16),from:e,functionSignature:n}}}(r,s,n,c),[4,te(e,r,JSON.stringify(l))];case 5:return d=y.sent(),m=ne(r,d,n),[4,fetch(o.serverURL+"/transactions",{headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionData:{from:r,params:[i.address,m]}}),method:"POST"})];case 6:if(!(h=y.sent()).ok)throw new Error(h.statusText);return[4,h.json()];case 7:return[2,y.sent().txHash];case 8:if(-1!==(f=y.sent()).message.indexOf("User denied message signature"))throw new de(f.message,ce.USER_DENIED);throw f instanceof de?f:(log("An error occurred trying to send the meta transaction. Error:",f.message),new de(f.message,ce.UNKNOWN));case 9:return[2]}var g}))}))}var he=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:0,inputs:[{indexed:1,internalType:"address",name:"owner",type:"address"},{indexed:1,internalType:"address",name:"spender",type:"address"},{indexed:0,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"address",name:"userAddress",type:"address"},{indexed:0,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:0,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"address",name:"from",type:"address"},{indexed:1,internalType:"address",name:"to",type:"address"},{indexed:0,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"CHILD_CHAIN_ID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"CHILD_CHAIN_ID_BYTES",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROOT_CHAIN_ID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROOT_CHAIN_ID_BYTES",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"}],fe=[{anonymous:0,inputs:[{indexed:0,internalType:"string",name:"contractURI",type:"string"}],name:"ContractURISet",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"address[]",name:"discountTokens",type:"address[]"},{indexed:0,internalType:"bool[]",name:"discountTokensIsERC1155",type:"bool[]"}],name:"DiscountTokensSet",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"contract IERC20Upgradeable",name:"tokenERC20",type:"address"}],name:"ERC20Set",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"contract IERC721Upgradeable",name:"tokenERC721",type:"address"}],name:"ERC721Set",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"uint256",name:"maxSupply",type:"uint256"}],name:"MaxSupplySet",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"address",name:"userAddress",type:"address"},{indexed:0,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:0,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"uint256",name:"multPrice",type:"uint256"}],name:"PriceSet",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:1,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:1,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:1,internalType:"address",name:"account",type:"address"},{indexed:1,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:1,internalType:"address",name:"account",type:"address"},{indexed:1,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"uint256",name:"startTime",type:"uint256"},{indexed:0,internalType:"uint256",name:"endTime",type:"uint256"}],name:"TimeWindowSet",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"uint256",name:"balance",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"for_account",type:"address"}],name:"getPrice",outputs:[{internalType:"uint256",name:"_price",type:"uint256"},{internalType:"bool",name:"use_discount",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSupply",outputs:[{internalType:"uint32",name:"maxSupply",type:"uint32"},{internalType:"uint256",name:"currentSupply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTimeWindow",outputs:[{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"domainSeparator",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isWindowOpen",outputs:[{internalType:"bool",name:"use_discount",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"maxPrice",type:"uint256"}],name:"mintCompi",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"discountTokens",type:"address[]"},{internalType:"bool[]",name:"discountTokensIsERC1155",type:"bool[]"}],name:"setDiscountTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20Upgradeable",name:"tokenERC20",type:"address"}],name:"setERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ERC721PresetMinterPauserAutoIdUpgradeable",name:"tokenERC721",type:"address"}],name:"setERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"maxSupply",type:"uint32"}],name:"setMaxSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"multPrice",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"}],name:"setTimeWindow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawBalance",outputs:[],stateMutability:"nonpayable",type:"function"}],ge=[{anonymous:0,inputs:[{indexed:1,internalType:"address",name:"owner",type:"address"},{indexed:1,internalType:"address",name:"approved",type:"address"},{indexed:1,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"address",name:"owner",type:"address"},{indexed:1,internalType:"address",name:"operator",type:"address"},{indexed:0,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"string",name:"contractURI",type:"string"}],name:"ContractURISet",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"address",name:"userAddress",type:"address"},{indexed:0,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:0,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:1,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:1,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:1,internalType:"address",name:"account",type:"address"},{indexed:1,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:1,internalType:"address",name:"account",type:"address"},{indexed:1,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"address",name:"from",type:"address"},{indexed:1,internalType:"address",name:"to",type:"address"},{indexed:1,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PAUSER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"baseTokenURI",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"__contractURI",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}],_e=[{anonymous:0,inputs:[{indexed:0,internalType:"address",name:"userAddress",type:"address"},{indexed:0,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:0,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"address",name:"_contract",type:"address"},{indexed:0,internalType:"uint256",name:"id",type:"uint256"},{indexed:0,internalType:"string",name:"scene",type:"string"},{indexed:0,internalType:"string",name:"question",type:"string"},{indexed:0,internalType:"string",name:"answer",type:"string"}],name:"QuestionAdded",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"address",name:"_contract",type:"address"},{indexed:0,internalType:"uint256",name:"id",type:"uint256"},{indexed:0,internalType:"string",name:"scene",type:"string"},{indexed:0,internalType:"string",name:"question",type:"string"}],name:"QuestionMuted",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"address",name:"_contract",type:"address"},{indexed:0,internalType:"uint256",name:"id",type:"uint256"},{indexed:0,internalType:"string",name:"scene",type:"string"},{indexed:0,internalType:"string",name:"question",type:"string"},{indexed:0,internalType:"uint256",name:"questionId",type:"uint256"}],name:"QuestionRemoved",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"address",name:"_contract",type:"address"},{indexed:0,internalType:"uint256",name:"id",type:"uint256"},{indexed:0,internalType:"string",name:"scene",type:"string"},{indexed:0,internalType:"string",name:"question",type:"string"}],name:"QuestionUnmuted",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:1,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:1,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:1,internalType:"address",name:"account",type:"address"},{indexed:1,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:0,inputs:[{indexed:1,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:1,internalType:"address",name:"account",type:"address"},{indexed:1,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:0,inputs:[{indexed:0,internalType:"address",name:"_contract",type:"address"},{indexed:0,internalType:"uint256",name:"id",type:"uint256"},{indexed:0,internalType:"string",name:"name",type:"string"}],name:"nameSet",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"},{internalType:"string",name:"answer",type:"string"}],name:"addQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"getAnswer",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"uint256",name:"offset",type:"uint256"}],name:"getQuestions",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"}],name:"getQuestionsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"domainSeparator",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"isQuestionMuted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"muteQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"},{internalType:"uint256",name:"questionId",type:"uint256"}],name:"removeQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"name",type:"string"}],name:"setName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"unmuteQuestion",outputs:[],stateMutability:"nonpayable",type:"function"}],be=function(){function e(e,t){if(e!=A.MUMBAI&&e!=A.MATIC&&e!=A.MOCKUP)throw new Error("Network not found: "+e);if(t!=E.COMPICACTUS&&t!=E.VOXTER)throw new Error("Character not found: "+t);this.contracts=this.getContracts(t),this.character=t,this.network=e,e==A.MUMBAI?(this.provider=new o.HTTPProvider("https://matic-mumbai.chainstacklabs.com/"),this.mana_contract=this.contracts.mana.mumbai,this.minter_contract=this.contracts.minter.mumbai,this.pfp_contract=this.contracts.pfp.mumbai,this.brain_contract=this.contracts.brain.mumbai):e==A.MATIC&&(this.provider=new o.HTTPProvider("https://rpc-mainnet.maticvigil.com"),this.mana_contract=this.contracts.mana.matic,this.minter_contract=this.contracts.minter.matic,this.pfp_contract=this.contracts.pfp.matic,this.brain_contract=this.contracts.brain.matic),this.metaRequestManager=new o.RequestManager(this.provider)}return e.prototype.getContracts=function(e){var t;return e==E.COMPICACTUS?t={matic:{address:"0xB1Eb9BE1Cf04a19448355893ca357f6F010b03B6",name:"CompiPFP"},mumbai:{address:"0xcF904EeCa0dC1d99E6c4Be05f6C9a733041Ce093",name:"CompiPFP"}}:e==E.VOXTER&&(t={matic:{address:"0x764e5a8c9ca14b456f5afbf31bfb2fa7f1e002b6",name:"Voxters"},mumbai:{address:"",name:""}}),{mana:{matic:{version:"1",abi:he,address:"0xA1c57f48F0Deb89f569dFbE6E2B7f46D33606fD4",name:"(PoS) Decentraland MANA",chainId:137},mumbai:{version:"1",abi:he,address:"0x4dA830330048be6380f102a83d3B94ea318bc598",name:"Decentraland MANA (PoS)",chainId:80001}},minter:{matic:{version:"1",abi:fe,address:"0x2E88409bD7eBc3A7b68b808994E2873645b1128D",name:"CompiMinter",chainId:137},mumbai:{version:"1",abi:fe,address:"0x0d7c91B526bA1334be837a82e92d6ca47ac6bCD7",name:"CompiMinter",chainId:80001}},pfp:{matic:{version:"1",abi:ge,address:t.matic.address,name:t.matic.name,chainId:137},mumbai:{version:"1",abi:ge,address:t.mumbai.address,name:t.mumbai.name,chainId:80001}},brain:{matic:{version:"1",abi:_e,address:"0x89e2558091D28290B834ddd42e59E2b72D07Fe0B",name:"CompiBrain",chainId:137},mumbai:{version:"1",abi:_e,address:"0x308aF74242aFb7bC598Ff1ced52De1D3E6cb02d7",name:"CompiBrain",chainId:80001}}}},e.prototype.getFunction=function(e,t){for(var n=0;n<t.length;n++)if("function"==t[n].type&&t[n].name==e)return t[n];throw new Error("Function not found: "+e)},e.prototype.prepareMetaTransaction=function(e,t){return c(this,void 0,void 0,(function(){var i;return y(this,(function(a){switch(a.label){case 0:return[4,n.getProvider()];case 1:return i=a.sent(),[2,me(new o.RequestManager(i),this.metaRequestManager,e.data,t)]}}))}))},e.prototype.getFactory=function(e){return c(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=new o.RequestManager(this.provider),[4,new o.ContractFactory(t,e.abi).at(e.address)];case 1:return[2,n.sent()]}}))}))},e.prototype.waitTX=function(e){return c(this,void 0,void 0,(function(){var t,n;return y(this,(function(i){switch(i.label){case 0:t=new o.RequestManager(this.provider),n=null,i.label=1;case 1:return null!=n?[3,3]:(f(2e3),[4,t.eth_getTransactionReceipt(e.toString())]);case 2:return n=i.sent(),[3,1];case 3:return[2,n]}}))}))},e.prototype.getPrice=function(){return c(this,void 0,void 0,(function(){var e,n=this;return y(this,(function(i){switch(i.label){case 0:return this.network!=A.MOCKUP?[3,2]:[4,this.mockupAnswer([1e19,0])];case 1:return[2,i.sent()];case 2:return[4,t.getUserPublicKey()];case 3:return e=i.sent(),log("publicKeyRequest",e),[2,this.getFactory(this.minter_contract).then((function(t){return c(n,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,t.getPrice(e)];case 1:return[2,n.sent()]}}))}))}))]}}))}))},e.prototype.wei2human=function(e){return o.fromWei(e,"ether")},e.prototype.isWindowOpen=function(){return c(this,void 0,void 0,(function(){var e=this;return y(this,(function(t){return[2,this.getFactory(this.minter_contract).then((function(t){return c(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,t.isWindowOpen()];case 1:return[2,e.sent()]}}))}))}))]}))}))},e.prototype.getTimeWindow=function(){return c(this,void 0,void 0,(function(){var e=this;return y(this,(function(t){return[2,this.getFactory(this.minter_contract).then((function(t){return c(e,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,t.getTimeWindow()];case 1:return[2,e.sent()]}}))}))}))]}))}))},e.prototype.mintCompi=function(e){return c(this,void 0,void 0,(function(){var t,n,i=this;return y(this,(function(a){return t=new o.SolidityFunction(this.getFunction("mintCompi",fe)),n=t.toPayload([e]),log(n),[2,this.prepareMetaTransaction(n,this.minter_contract).then((function(e){return c(i,void 0,void 0,(function(){return y(this,(function(t){return log("increaseAllowance TX ",e),[2,this.waitTX(e)]}))}))})).then().catch()]}))}))},e.prototype.balance=function(){return c(this,void 0,void 0,(function(){var e,n=this;return y(this,(function(i){switch(i.label){case 0:return[4,t.getUserPublicKey()];case 1:return e=i.sent(),[2,this.getFactory(this.mana_contract).then((function(t){return c(n,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,t.balanceOf(e)];case 1:return[2,n.sent()]}}))}))}))]}}))}))},e.prototype.increaseAllowance=function(e){return c(this,void 0,void 0,(function(){var t,n,i=this;return y(this,(function(a){return t=new o.SolidityFunction(this.getFunction("increaseAllowance",he)),n=t.toPayload([this.minter_contract.address,e]),log(n),[2,this.prepareMetaTransaction(n,this.mana_contract).then((function(e){return c(i,void 0,void 0,(function(){return y(this,(function(t){return log("increaseAllowance TX ",e),[2,this.waitTX(e)]}))}))})).then().catch()]}))}))},e.prototype.balanceOf=function(){return c(this,void 0,void 0,(function(){var e,n=this;return y(this,(function(i){switch(i.label){case 0:return this.network!=A.MOCKUP?[3,2]:[4,this.mockupAnswer(3)];case 1:return[2,i.sent()];case 2:return[4,t.getUserPublicKey()];case 3:return e=i.sent(),log("publicKeyRequest",e),[2,this.getFactory(this.pfp_contract).then((function(t){return c(n,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,t.balanceOf(e)];case 1:return[2,n.sent()]}}))}))}))]}}))}))},e.prototype.tokenOfOwnerByIndex=function(e){return c(this,void 0,void 0,(function(){var n,i=this;return y(this,(function(a){switch(a.label){case 0:return this.network!=A.MOCKUP?[3,2]:[4,this.mockupAnswer(e)];case 1:return[2,a.sent()];case 2:return[4,t.getUserPublicKey()];case 3:return n=a.sent(),log("publicKeyRequest",n),[2,this.getFactory(this.pfp_contract).then((function(t){return c(i,void 0,void 0,(function(){return y(this,(function(i){switch(i.label){case 0:return[4,t.tokenOfOwnerByIndex(n,e)];case 1:return[2,i.sent()]}}))}))}))]}}))}))},e.prototype.getName=function(e){return c(this,void 0,void 0,(function(){var t=this;return y(this,(function(n){switch(n.label){case 0:return this.network!=A.MOCKUP?[3,2]:[4,this.mockupAnswer("Mockup Name")];case 1:return[2,n.sent()];case 2:return[2,this.getFactory(this.brain_contract).then((function(n){return c(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,n.getName(this.pfp_contract.address,e)];case 1:return[2,t.sent()]}}))}))}))]}}))}))},e.prototype.getQuestionsCount=function(e){return c(this,void 0,void 0,(function(){var t=this;return y(this,(function(n){switch(n.label){case 0:return this.network!=A.MOCKUP?[3,2]:[4,this.mockupAnswer(30)];case 1:return[2,n.sent()];case 2:return"default",[2,this.getFactory(this.brain_contract).then((function(n){return c(t,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,n.getQuestionsCount(this.pfp_contract.address,e,"default")];case 1:return[2,t.sent()]}}))}))}))]}}))}))},e.prototype.setName=function(e,t){return c(this,void 0,void 0,(function(){var n,i,a=this;return y(this,(function(r){switch(r.label){case 0:return this.network!=A.MOCKUP?[3,2]:[4,this.mockupAnswer(0)];case 1:return[2,r.sent()];case 2:return n=new o.SolidityFunction(this.getFunction("setName",_e)),i=n.toPayload([this.pfp_contract.address,e,t]),log(i),[2,this.prepareMetaTransaction(i,this.brain_contract).then((function(e){return c(a,void 0,void 0,(function(){return y(this,(function(t){return log("setName TX ",e),[2,this.waitTX(e)]}))}))})).then().catch()]}}))}))},e.prototype.addQuestion=function(e,t,n){return c(this,void 0,void 0,(function(){var i,a,r=this;return y(this,(function(s){switch(s.label){case 0:return this.network!=A.MOCKUP?[3,2]:[4,this.mockupAnswer(0)];case 1:return[2,s.sent()];case 2:return"default",i=new o.SolidityFunction(this.getFunction("addQuestion",_e)),a=i.toPayload([this.pfp_contract.address,e,"default",t,n]),log(a),[2,this.prepareMetaTransaction(a,this.brain_contract).then((function(e){return c(r,void 0,void 0,(function(){return y(this,(function(t){return log("addQuestion TX ",e),[2,this.waitTX(e)]}))}))})).then().catch()]}}))}))},e.prototype.removeQuestion=function(e,t,n){return c(this,void 0,void 0,(function(){var i,a,r=this;return y(this,(function(s){switch(s.label){case 0:return this.network!=A.MOCKUP?[3,2]:(log("removeQuestion",t,n),[4,this.mockupAnswer(0)]);case 1:return[2,s.sent()];case 2:return"default",i=new o.SolidityFunction(this.getFunction("removeQuestion",_e)),a=i.toPayload([this.pfp_contract.address,e,"default",t,n]),log(a),[2,this.prepareMetaTransaction(a,this.brain_contract).then((function(e){return c(r,void 0,void 0,(function(){return y(this,(function(t){return log("removeQuestion TX ",e),[2,this.waitTX(e)]}))}))})).then().catch()]}}))}))},e.prototype.getAnswer=function(e,t){return c(this,void 0,void 0,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return this.network!=A.MOCKUP?[3,2]:[4,this.mockupAnswer("This is an answer to "+e+" "+t)];case 1:return[2,i.sent()];case 2:return"default",[2,this.getFactory(this.brain_contract).then((function(i){return c(n,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,i.getAnswer(this.pfp_contract.address,e,"default",t)];case 1:return[2,n.sent()]}}))}))}))]}}))}))},e.prototype.getQuestions=function(e,t){return c(this,void 0,void 0,(function(){var n=this;return y(this,(function(i){switch(i.label){case 0:return this.network!=A.MOCKUP?[3,2]:[4,this.mockupAnswer(this.getMockupQuestions(e,t))];case 1:return[2,i.sent()];case 2:return"default",[2,this.getFactory(this.brain_contract).then((function(i){return c(n,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,i.getQuestions(this.pfp_contract.address,e,"default",t)];case 1:return[2,n.sent()]}}))}))}))]}}))}))},e.prototype.getMockupQuestions=function(e,t){var n,i=[];n=t<20?10:t<30?3:0;for(var a=0;a<10;a++)i.push("");for(a=0;a<n;a++)i[a]="Q "+a+" ("+e+", "+t+")";return i},e.prototype.mockupAnswer=function(e){return c(this,void 0,void 0,(function(){var t;return y(this,(function(n){return t=500+500*Math.random(),0==e&&(t=100),f(t),[2,e]}))}))},e}();e.Blockchain=be,e.CHARACTER=E,e.CompiNPC=H,e.CompiNPCSystem=G,e.Compicactus=b,e.NETWORK=A,Object.defineProperty(e,"__esModule",{value:1})}))},function(t,n){t.exports=e},function(e,t){e.exports=n},function(e,t){e.exports=s}]));